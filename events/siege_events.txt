# Imprisoned by the winner. Fired from 'on_siege_over_loc_chars'.
# Siege winner unit owner in the 'new_character' scope, lost holding title in FROM, local character in ROOT.
character_event = {
	id = 62100
	picture = GFX_evt_siege
	
	desc = EVTDESC62100
	
	is_triggered_only = yes
	
	trigger = {
		new_character = {
			NOT = { has_landed_title = e_rebels }
			rebel = no
		}
		
		OR = {
			is_ruler = yes
			AND = {
				is_female = yes
				NOT = { age = 40 }
			}
			
			host = {
				OR = {
					is_close_relative = ROOT
					any_spouse = {
						character = ROOT
					}
					any_consort = {
						character = ROOT
					}
				}
			}
			new_character = {
				ROOT = {
					prisoner = yes
					employer = {
						character = PREVPREV
					}
				}
			}
			
			AND = {
				new_character = {
					ROOT = {
						host = {
							top_liege = {
								war_with = PREVPREVPREV
							}
						}
					}
				}
				
				host = {
					top_liege = {
						is_close_relative = ROOT
					}
				}
			}
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 2
			is_female = yes
			new_character = {
			    religion_group = pagan_group
			}
		}
		modifier = {
			factor = 4 # Free prisoner
			new_character = {
				ROOT = {
					prisoner = yes
					employer = {
						character = PREVPREV
					}
				}
			}
		}
		modifier = {
			factor = 10 # if new_char (the sieger) was a warrior lodge member
			new_character = {
			    OR = {
				    AND = {
				        is_member_of_any_warrior_lodge_trigger = yes
				        society_rank > 1 #Must be rank 2 or higher
					}
					religion = brethren
				}
			}
		}
		modifier = {
			factor = 10 # if new_char (the sieger) has a particular Legendary bloodline
			new_character = {
				any_owned_bloodline = {
					has_bloodline_flag = bloodline_reaver
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA62100
		trigger = {
			center_flank_leader = {
				mercenary = no
			}
		}
		new_character = {
			ROOT = {
				imprison = PREV
			}
		}
		hidden_tooltip = {
			new_character = {
				character_event = { id = 62101 }
			}
		}
	}

	option = {
		name = EVTOPTA62100
		trigger = {
			center_flank_leader = {
				mercenary = yes
			}
		}
		center_flank_leader = {
			ROOT = {
				imprison = PREV
			}
		}
	}
}

# Jailor informed
character_event = {
	id = 62101
	picture = GFX_evt_siege
	desc = EVTDESC62101
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	notification = yes
	
	ai = no
	
	option = {
		name = EVTOPTA62101
		tooltip = {
			FROM = {
				imprison = yes
			}
		}
	}
}